<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Ordo: include/common/securemem.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ordo
   &#160;<span id="projectnumber">1.0.1</span>
   </div>
   <div id="projectbrief">Symmetric Cryptography Library</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_cfc40bcf945a94a5aced014fdc532bf3.html">include</a>      </li>
      <li class="navelem"><a class="el" href="dir_8f9a411e77482bba10282a572dbcb6a1.html">common</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">securemem.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Secure memory interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ordotypes_8h_source.html">ordotypes.h</a>&quot;</code><br/>
</div>
<p><a href="securemem_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="securemem_8h.html#ae96907e9054124cc4e181470a9a2afd4">salloc</a> (size_t size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="securemem_8h.html#ab499a88f4bdfd394baed134b4e7bf922">sprotect</a> (void *ptr, size_t size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="securemem_8h.html#a1dfb92f275f195d99aa2e9a25be59c52">swipe</a> (void *ptr, size_t size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="securemem_8h.html#aff3a39cce0d3aa545bcce37589479abf">sfree</a> (void *ptr, size_t size)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Secure memory interface. </p>
<p>Exposes the Secure Memory API, which is essentially a wrapper around malloc and free, taking care of locking and securely erasing memory for security-sensitive data.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Implement other platforms.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd>securemem.c </dd></dl>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae96907e9054124cc4e181470a9a2afd4"></a><!-- doxytag: member="securemem.h::salloc" ref="ae96907e9054124cc4e181470a9a2afd4" args="(size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="securemem_8h.html#ae96907e9054124cc4e181470a9a2afd4">salloc</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function returns a pointer that is locked in physical memory. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The amount of memory to allocate, in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns the allocated pointer on success, or 0 if the function fails. The function can fail if allocation fails (if the system is out of memory) or if locking fails (if the process has reached its locked memory limit). Neither of these conditions should arise under normal operation. </dd></dl>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>Sometimes, operating systems can decide to page out rarely-accessed memory to the hard drive. However, once the memory is needed and is paged back in, its footprint on the hard drive is not erased. Thus, if cryptographic material is paged out in this way, it can be compromised by hard drive analysis even months after the event occurred. This function prevents this by instructing the operating system not to page out the allocated memory. </dd>
<dd>
Note that this is a hint to the operating system, nothing more. Consult your operating system's implementation of virtual memory locking to know more. </dd></dl>

</div>
</div>
<a class="anchor" id="ab499a88f4bdfd394baed134b4e7bf922"></a><!-- doxytag: member="securemem.h::sprotect" ref="ab499a88f4bdfd394baed134b4e7bf922" args="(void *ptr, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="securemem_8h.html#ab499a88f4bdfd394baed134b4e7bf922">sprotect</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function sets memory as read-only. If this function succeeds, any attempt to write to the memory will incur an access violation, until the read-only restriction is lifted. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>The pointer to the memory to set as read-only. </td></tr>
    <tr><td class="paramname">size</td><td>The amount of memory, in bytes, to set as read-only. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns 0 on success, and anything else on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a1dfb92f275f195d99aa2e9a25be59c52"></a><!-- doxytag: member="securemem.h::swipe" ref="a1dfb92f275f195d99aa2e9a25be59c52" args="(void *ptr, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="securemem_8h.html#a1dfb92f275f195d99aa2e9a25be59c52">swipe</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function wipes memory by overwriting it with zeroes. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>The pointer to the memory to wipe. </td></tr>
    <tr><td class="paramname">size</td><td>The amount of memory, in bytes, to wipe. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aff3a39cce0d3aa545bcce37589479abf"></a><!-- doxytag: member="securemem.h::sfree" ref="aff3a39cce0d3aa545bcce37589479abf" args="(void *ptr, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="securemem_8h.html#aff3a39cce0d3aa545bcce37589479abf">sfree</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function frees a pointer, and securely erases the memory it points to. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>An allocated pointer to memory to erase and free. </td></tr>
    <tr><td class="paramname">size</td><td>The amount of memory, in bytes, pointed to by ptr. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sat Sep 8 2012 01:06:19 for Ordo by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
